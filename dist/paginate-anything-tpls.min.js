// angular-paginate-anything - v4.2.0

!function(){"use strict";function g(e){return Math.floor(Math.pow(10,Math.floor(e/3))*[1,2.5,5][e%3])}function l(e){if(e<1)return 0;var a=Math.floor(Math.log(e)/Math.LN10),t=e/(2.5*Math.pow(10,a));return 3<=t&&(a++,t=0),3*a+Math.round(Math.min(2,t))}function u(e){return e===1/0?1/0:g(l(e))}function p(e){return e.to-e.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",paginationClass:"=?",selectClass:"=?",perPageClass:"=?",passive:"@",transformResponse:"=?",method:"@",postData:"=?",loadFn:"&",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(e,a){return a.templateUrl||"src/paginate-anything.html"},replace:!0,controller:["$scope","$attrs","$http",function(s,e,r){s.reloadPage=!1,s.serverLimit=1/0,s.Math=window.Math;var n=void 0!==e.loadFn;"boolean"!=typeof s.autoPresets&&(s.autoPresets=!0);var a=s.linkGroupSize,t=s.clientLimit;function i(i){if("true"!==s.passive&&(s.url||n)){s.$emit("pagination:loadStart",i);var e,a,t={method:s.method||"GET",url:s.url,params:s.urlParams,data:s.postData,headers:angular.extend({},s.headers,{"Range-Unit":"items",Range:[i.from,i.to].join("-")}),transformResponse:(e=r.defaults.transformResponse,a=s.transformResponse,e=angular.isArray(e)?e:[e],a?e.concat(a):e)};(n?s.loadFn({config:t}):r(t)).then(function(e){var a,t,r=(a=e.headers("Content-Range"),(t=a&&a.match(/^(?:items )?(\d+)-(\d+)\/(\d+|\*)$/))?{from:+t[1],to:+t[2],total:"*"===t[3]?1/0:+t[3]}:"*/0"===a?{total:0}:null);if(204===e.status||r&&0===r.total?(s.numItems=0,s.collection=[]):(s.numItems=r?r.total:e.data.length,s.collection=e.data||[]),r&&(s.rangeFrom=r.from,s.rangeTo=r.to,p(r)<r.total&&(i.to<r.total-1||r.to<r.total-1&&r.total<i.to)&&(!s.perPage||p(r)<s.perPage))){if(s.autoPresets){var n=l(p(r));g(n)>p(r)&&n--,s.serverLimit=g(n)}else s.serverLimit=p(r);s.perPage=s.Math.min(s.serverLimit,s.clientLimit)}s.numPages=Math.ceil(s.numItems/(s.perPage||50)),s.$emit("pagination:loadPage",e.status,e.config)},function(e){s.$emit("pagination:error",e.status,e.config)})}}s.linkGroupSize="number"==typeof a?a:3,s.clientLimit="number"==typeof t?t:250,s.updatePresets=function(){if(s.autoPresets){var e,a=[];for(e=Math.min(3,l(s.perPage||50));e<=l(Math.min(s.clientLimit,s.serverLimit));e++)a.push(g(e));s.perPagePresets=a}else s.perPagePresets=s.perPagePresets.filter(function(e){return e<=s.serverLimit}).concat([s.serverLimit])},s.gotoPage=function(e){e<0||e*s.perPage>=s.numItems||(s.page=e)},s.linkGroupFirst=function(){var e=Math.max(0,s.linkGroupSize-(s.numPages-1-(s.page+2)));return Math.max(0,s.page-(s.linkGroupSize+e))},s.linkGroupLast=function(){var e=Math.max(0,s.linkGroupSize-(s.page-2));return Math.min(s.numPages-1,s.page+(s.linkGroupSize+e))},s.isFinite=function(){return s.numPages<1/0},s.page=s.page||0,s.size=s.size||"md",s.autoPresets&&s.updatePresets(),s.$watch("page",function(e,a){if("true"!==s.passive&&e!==a){if(e<0||e*s.perPage>=s.numItems)return;var t=s.perPage||50;s.autoPresets&&(t=u(t)),i({from:e*t,to:(e+1)*t-1})}}),s.$watch("perPage",function(e,a){if("true"!==s.passive&&"number"==typeof a&&e!==a){var t=s.page*a,r=Math.floor(t/e);s.page!==r?s.page=r:i({from:s.page*e,to:(s.page+1)*e-1})}}),s.$watch("serverLimit",function(e,a){"true"!==s.passive&&e!==a&&s.updatePresets()}),s.$watch("url",function(e,a){"true"!==s.passive&&e!==a&&(0===s.page?s.reloadPage=!0:s.page=0)}),s.$watch("urlParams",function(e,a){"true"!==s.passive&&(angular.equals(e,a)||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$watch("headers",function(e,a){"true"!==s.passive&&(angular.equals(e,a)||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$watch("reloadPage",function(e,a){if("true"!==s.passive&&!0===e&&!1===a){var t=s.perPage||50;s.reloadPage=!1,i({from:s.page*t,to:(s.page+1)*t-1})}}),s.$watch("transformResponse",function(e,a){"true"!==s.passive&&e&&a&&(angular.equals(e.toString(),a.toString())||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$on("pagination:reload",function(){s.reloadPage=!0});var o=s.perPage||50;s.autoPresets&&(o=u(o)),i({from:s.page*o,to:(s.page+1)*o-1})}]}}).filter("makeRange",function(){return function(e){var a,t;switch(e.length){case 1:a=0,t=parseInt(e[0],10)-1;break;case 2:a=parseInt(e[0],10),t=parseInt(e[1],10);break;default:return e}for(var r=[],n=a;n<=t;n++)r.push(n);return r}})}(),angular.module("bgf.paginateAnything").run(["$templateCache",function(e){"use strict";e.put("src/paginate-anything.html",'<div class="paginate-anything {{paginationClass}}"><ul class="pagination pagination-{{size}} links" ng-if="numPages > 1"><li ng-class="{disabled: page <= 0}"><a href ng-click=gotoPage(page-1)>&laquo;</a></li><li ng-if="linkGroupFirst() > 0"><a href ng-click=gotoPage(0)>1</a></li><li ng-if="linkGroupFirst() > 1" class=disabled><a href>&hellip;</a></li><li ng-repeat="p in [linkGroupFirst(), linkGroupLast()] | makeRange" ng-class="{active: p === page}"><a href ng-click=gotoPage(p)>{{p+1}}</a></li><li ng-if="linkGroupLast() < numPages - 2" class=disabled><a href>&hellip;</a></li><li ng-if="isFinite() && linkGroupLast() < numPages - 1"><a href ng-click=gotoPage(numPages-1)>{{numPages}}</a></li><li ng-class="{disabled: page >= numPages - 1}"><a href ng-click=gotoPage(page+1)>&raquo;</a></li></ul><div class="per-page {{perPageClass}}" ng-if="perPagePresets.length > 0 && numPages > 1"><select class={{selectClass}} ng-model=$parent.perPage ng-options="p for p in perPagePresets"></select>per page</div></div>')}]);